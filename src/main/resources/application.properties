spring.application.name=qrmfg

# Oracle Database
spring.datasource.url=jdbc:oracle:thin:@localhost:1521/xe
spring.datasource.username=system
spring.datasource.password=root
spring.datasource.driver-class-name=oracle.jdbc.OracleDriver
spring.jpa.hibernate.ddl-auto=update
spring.jpa.database-platform=org.hibernate.dialect.Oracle12cDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.show-sql=false

# HikariCP Configuration for Oracle
spring.datasource.hikari.auto-commit=false
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000
spring.datasource.hikari.connection-init-sql=SELECT 1 FROM DUAL

# Hibernate Envers Configuration - Temporarily disabled to fix constraint issues
# spring.jpa.properties.org.hibernate.envers.audit_table_suffix=_aud
# spring.jpa.properties.org.hibernate.envers.revision_field_name=rev
# spring.jpa.properties.org.hibernate.envers.revision_type_field_name=revtype
# spring.jpa.properties.org.hibernate.envers.store_data_at_delete=true


# JWT
jwt.secret=ChangeThisSecretKeyToAStrongRandomValue
jwt.expiration=86400000 

# Email Configuration (Spring Mail)
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=your-email@gmail.com
spring.mail.password=your-app-password
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com

# Notification Configuration
notification.enabled=true
notification.email.enabled=true
notification.email.from=noreply@qrmfg.com
notification.email.from-name=QRMFG Workflow System
notification.slack.enabled=false
notification.slack.webhook-url=
notification.slack.default-channel=#workflow-notifications
notification.template.base-path=classpath:/templates/notifications/
notification.template.default-engine=thymeleaf
notification.retry.max-attempts=3
notification.retry.delay-millis=5000
notification.retry.backoff-multiplier=2.0

spring.security.user.name=admin
spring.security.user.password=admin

#port config
server.port=8081

# Monitoring and Performance Configuration
management.endpoints.web.exposure.include=health,info,metrics,prometheus,httptrace,loggers
management.endpoint.health.show-details=always
management.endpoint.metrics.enabled=true
management.endpoint.prometheus.enabled=true
management.metrics.export.prometheus.enabled=true
management.metrics.distribution.percentiles-histogram.http.server.requests=true
management.metrics.distribution.percentiles.http.server.requests=0.5,0.95,0.99
management.metrics.tags.application=qrmfg-workflow

# Performance monitoring
performance.monitoring.enabled=true
performance.monitoring.slow-query-threshold-ms=1000
performance.monitoring.slow-workflow-threshold-ms=2000
performance.monitoring.slow-notification-threshold-ms=5000
performance.monitoring.slow-api-threshold-ms=3000

# User activity tracking
user.activity.tracking.enabled=true
user.activity.tracking.retention-days=90
user.activity.tracking.batch-size=100

# Database performance
spring.jpa.properties.hibernate.generate_statistics=false
spring.jpa.properties.hibernate.session.events.log.LOG_QUERIES_SLOWER_THAN_MS=1000
spring.jpa.properties.hibernate.cache.use_second_level_cache=false
spring.jpa.properties.hibernate.cache.use_query_cache=false
spring.jpa.properties.hibernate.cache.region.factory_class=org.hibernate.cache.internal.NoCacheRegionFactory
spring.jpa.properties.hibernate.jdbc.batch_size=25

# Caching configuration
spring.cache.type=simple
spring.cache.cache-names=projects,materials,plants,blocks,questionnaire-templates
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=30m

# Duplicate Hibernate Envers Configuration removed - already defined above

# Duplicate Security Configuration removed - already defined above

# Duplicate JWT Configuration removed - already defined above

# File Upload Configuration
spring.servlet.multipart.max-file-size=25MB
spring.servlet.multipart.max-request-size=100MB

# Document Storage Configuration
app.document.storage.path=./documents
app.document.allowed-types=pdf,docx,xlsx
app.document.max-size=26214400

# Notification Configuration (Mock for Testing)
app.notification.email.enabled=false
app.notification.slack.enabled=false
app.notification.sms.enabled=false

# Cache Configuration
spring.cache.type=simple
spring.cache.cache-names=projects,materials,plants,blocks,questionnaires

# Logging Configuration
logging.level.com.cqs.qrmfg=INFO
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN
logging.level.org.hibernate.engine.internal.StatisticalLoggingSessionEventListener=ERROR
logging.level.org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl=ERROR
logging.level.org.hibernate.orm.connections.access=WARN

# Performance Monitoring
management.endpoints.web.exposure.include=health,metrics,info
management.endpoint.health.show-details=always
management.metrics.export.simple.enabled=true

# Async Configuration for Testing
spring.task.execution.pool.core-size=5
spring.task.execution.pool.max-size=10
spring.task.execution.pool.queue-capacity=100

# Transaction Configuration
spring.transaction.default-timeout=30
spring.jpa.properties.hibernate.connection.autocommit=false
spring.jpa.properties.hibernate.connection.provider_disables_autocommit=true
spring.jpa.properties.hibernate.current_session_context_class=org.springframework.orm.hibernate5.SpringSessionContext
spring.jpa.open-in-view=false

# Mock External Services
app.external.email.mock=true
app.external.slack.mock=true
app.external.ldap.mock=true

# Performance Test Thresholds (in milliseconds)
app.test.performance.dashboard.threshold=2000
app.test.performance.dropdown.threshold=500
app.test.performance.query.threshold=1000
app.test.performance.export.threshold=5000
app.test.performance.concurrent.threshold=10000

# Memory Test Configuration
app.test.memory.max-increase=104857600
app.test.memory.gc-recovery-ratio=0.5

# Validation Configuration
app.validation.project-code.pattern=^SER-[A-Z]-\\d{6}$
app.validation.material-code.pattern=^R\\d{5}[A-Z]$
app.validation.plant-code.pattern=^\\d{4}$
app.validation.block-code.pattern=^\\d{4}-[A-Z]$

# SLA Configuration for Testing
app.sla.query-resolution.days=3
app.sla.workflow-completion.days=14
app.sla.notification.retry-attempts=3
app.sla.notification.retry-delay=1000

# Audit Configuration
app.audit.enabled=true
app.audit.retention.days=365
app.audit.export.batch-size=1000

